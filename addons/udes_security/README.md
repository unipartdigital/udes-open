# UDES Security

## Attachments

* Users can only upload or download allowed file types.
* Users cannot cannot upload or download a file without an extension.
* Superuser is exempt from the above, but any files that do not have an allowed file type will be made inactive.
* If changing a file type to another, the attachment will adopt the state of that file type.
For example, if CSV is allowed and JSON isn't, then test.csv is changed to test.json.
The attachment will then become inactive. It cannot be changed to an invalid file type unless the
user is a superuser.
* There are cases when attachments generated by the system (i.e. not by uploading a file) will be set to active.
For example when an avatar image attachment is created for a user (e.g. image_1920)
* Superuser and human admin user (the default admin user created by Odoo) are exempt from the allowed file type check in IrAttachment

## Allowed File Types

* Only one record can exist per file type. (e.g. CSV)
* The extension is stored lowercase, and any file extensions are made lowercase when checked.
* Allowed File Type records can be made inactive, indicating that the File Type is now blocked.
* If an Allowed File Type is created or made active, any inactive attachments of that file type will be made active.
Conversely, if an Allowed File Type is deleted or made inactive, any existing attachments of that file type will be made inactive.
* Only users with Manage Allowed File Types can create/delete active file types and set them as active/inactive. By default only superuser or default admin can grant this group to other users.


## Desktop access

* User still has backend/database access via rpc
* A new security group `Desktop Access` exists, and is automatically applied to `Admin` and the superuser by this module.
* Landing pages and login have hooks added to check if this security group is set on the user attempting to log in
* If the security group is not set, the user is redirected to a `No Access` page
* If the security group is set, login proceeds as usual
* If a users desktop access group is revoked while their session is active, they can continue their session until refreshing the page or session expires.


## Password Complexity

Password complexity can be configured per company. These settings are
available:

**Company (model: res.company)**

| Field Name | Type | Description |
|------------|------|-------------|
| u_minimum_password_length | Integer | The minimum length for a password. |
| u_minimum_password_lower | Integer | The minimum number of lowercase ASCII characters in a password. |
| u_minimum_password_upper | Integer | The minimum number of uppercase ASCII characters in a password. |
| u_minimum_password_numeric | Integer | The minimum number of ASCII digits in a password. |
| u_minimum_password_special | Integer | The minimum number of unique special characters in a password. |
